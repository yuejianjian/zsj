starter.controller("mapCtrl",["$scope","$stateParams",function(a,n){angular.extend(a,n);var t=new BMap.Map("allmap"),e=new BMap.GeolocationControl;t.addControl(e);var o=new BMap.Point(114.316,30.581);t.centerAndZoom(o,15);for(var r=t.getBounds(),l=r.getSouthWest(),i=r.getNorthEast(),c=Math.abs(l.lng-i.lng),p=Math.abs(i.lat-l.lat),M=0;M<5;M++){var o=new BMap.Point(l.lng+c*(.7*Math.random()),i.lat-p*(.7*Math.random()));!function(n){function e(){a.isShow=!0;var n=r.getPosition();alert("marker的位置是"+n.lng+","+n.lat)}var o=new BMap.Icon("http://bpic.588ku.com/element_origin_min_pic/01/03/21/6956f43dc50dcc3.jpg",new BMap.Size(50,50),{anchor:new BMap.Size(10,30)}),r=new BMap.Marker(n,{icon:o});r.addEventListener("click",e),t.addOverlay(r)}(o)}}]);