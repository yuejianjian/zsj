starter.controller("registerCtrl",["$scope","$state","httpSvc","$stateParams","util",function(e,t,o,a,r){angular.extend(e,a),e.mobileRegx="^(13[0-9]|15[012356789]|17[013678]|18[0-9]|14[57])[0-9]{8}$",e.pwdRegx="[a-zA-Z0-9]*";var n=r.countDown({timer:60});e.codeText="发送验证码";var i=/^(13[0-9]|15[012356789]|17[013678]|18[0-9]|14[57])[0-9]{8}$/;e.getCaptcha=function(){i.test(e.data.mobile)?(o.post("/mutual/sms/index",{mobile:e.data.mobile}).then(function(e){}),n.run(function(t){e.codeText="重新发送("+t+")",flag=!0},function(){flag=!1,e.codeText="发送验证码"})):(e.error=!0,e.errorMsg="请输入正确的手机号")},e.data={},e.save=function(t){e.valid=!0,t.$valid&&e.register()},e.register=function(){o.post("/user/reg/index",{mobile:e.data.mobile,code:e.data.captcha,password:e.data.pwd}).then(function(o){console.log(o),0==o.code?(e.error=!0,e.errorMsg=o.msg):1==o.code&&t.go("login")})}}]);