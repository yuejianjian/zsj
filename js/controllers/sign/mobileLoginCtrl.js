starter.controller("mobileLoginCtrl",["$scope","httpSvc","$state","$stateParams","util",function(o,t,e,n,a){angular.extend(o,n),o.mobileRegx="^(13[0-9]|15[012356789]|17[013678]|18[0-9]|14[57])[0-9]{8}$",o.pwdRegx="[a-zA-Z0-9]*";var i=a.countDown({timer:60});o.codeText="发送验证码";var r=/^(13[0-9]|15[012356789]|17[013678]|18[0-9]|14[57])[0-9]{8}$/;o.getCaptcha=function(){r.test(o.data.mobile)?(t.post("/mutual/sms/index",{mobile:o.data.mobile}).then(function(o){}),i.run(function(t){o.codeText="重新发送("+t+")",flag=!0},function(){flag=!1,o.codeText="发送验证码"})):(o.error=!0,o.errorMsg="请输入正确的手机号")},o.data={},o.save=function(t){o.valid=!0,t.$valid&&o.login()},o.login=function(){t.post("/user/login/code",{mobile:o.data.mobile,code:o.data.captcha}).then(function(t){console.log(t),0==t.code?(o.error=!0,o.errorMsg=t.msg):1==t.code&&e.go("login")})}}]);